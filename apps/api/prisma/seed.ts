import { PrismaClient, QuestionType } from '@prisma/client';

const prisma = new PrismaClient();

// Source data provided by user
const data = {
  categories: [
    {
      title: 'РђРЅР°С‚РѕРјРёСЏ (Р±Р°Р·РѕРІР°СЏ)',
      tags: ['anat', 'easy'],
      questions: [
        {
          value: 100,
          type: 'text',
          prompt: 'РЎРєРѕР»СЊРєРѕ РєР°РјРµСЂ Сѓ СЃРµСЂРґС†Р° С‡РµР»РѕРІРµРєР°?',
          answersAccept: ['4', 'С‡РµС‚С‹СЂРµ'],
          answersReject: [],
          requireFull: false,
          language: 'ru',
          hint: 'Р”РІРµ РїСЂРµРґСЃРµСЂРґРёСЏ, РґРІР° Р¶РµР»СѓРґРѕС‡РєР°',
        },
        {
          value: 200,
          type: 'word',
          prompt: 'РљСЂСѓРїРЅРµР№С€Р°СЏ РєРѕСЃС‚СЊ С‚РµР»Р° (РѕРґРЅРѕ СЃР»РѕРІРѕ)',
          answersAccept: ['Р±РµРґСЂРµРЅРЅР°СЏ', 'Р±РµРґСЂРѕ'],
          canonicalAnswer: 'Р±РµРґСЂРµРЅРЅР°СЏ',
          hint: 'РќРёР¶РЅСЏСЏ РєРѕРЅРµС‡РЅРѕСЃС‚СЊ',
        },
        {
          value: 300,
          type: 'text',
          prompt: 'РћСЂРіР°РЅ, С„РёР»СЊС‚СЂСѓСЋС‰РёР№ РєСЂРѕРІСЊ Рё РѕР±СЂР°Р·СѓСЋС‰РёР№ РјРѕС‡Сѓ?',
          answersAccept: ['РїРѕС‡РєР°', 'РїРѕС‡РєРё'],
          requireFull: false,
        },
        {
          value: 400,
          type: 'text',
          prompt: 'Р§РµСЂРµРїРЅРѕ-РјРѕР·РіРѕРІРѕР№ РЅРµСЂРІ, РѕС‚РІРµС‡Р°СЋС‰РёР№ Р·Р° Р·СЂРµРЅРёРµ (РЅРѕРјРµСЂ РёР»Рё РЅР°Р·РІР°РЅРёРµ)?',
          answersAccept: ['ii', '2', 'Р·СЂРёС‚РµР»СЊРЅС‹Р№', 'optic'],
          requireFull: false,
        },
        {
          value: 500,
          type: 'text',
          prompt: 'РљР°РЅР°Р» РІ РїРѕР·РІРѕРЅРѕС‡РЅРёРєРµ, С‡РµСЂРµР· РєРѕС‚РѕСЂС‹Р№ РїСЂРѕС…РѕРґРёС‚ СЃРїРёРЅРЅРѕР№ РјРѕР·Рі?',
          answersAccept: ['РїРѕР·РІРѕРЅРѕС‡РЅС‹Р№ РєР°РЅР°Р»', 'vertebral canal'],
        },
      ],
    },
    {
      title: 'Р¤Р°СЂРјР°РєРѕР»РѕРіРёСЏ',
      tags: ['pharm'],
      questions: [
        {
          value: 100,
          type: 'text',
          prompt: 'РљР»Р°СЃСЃ РїСЂРµРїР°СЂР°С‚РѕРІ: РёР±СѓРїСЂРѕС„РµРЅ, РЅР°РїСЂРѕРєСЃРµРЅ?',
          answersAccept: ['РЅРїРІСЃ', 'РЅРµСЃС‚РµСЂРѕРёРґРЅС‹Рµ РїСЂРѕС‚РёРІРѕРІРѕСЃРїР°Р»РёС‚РµР»СЊРЅС‹Рµ', 'nsaids'],
        },
        {
          value: 200,
          type: 'word',
          prompt: 'РђРЅС‚Р°РіРѕРЅРёСЃС‚ РІРёС‚Р°РјРёРЅР° K (РѕРґРЅРѕ СЃР»РѕРІРѕ)',
          answersAccept: ['РІР°СЂС„Р°СЂРёРЅ', 'warfarin'],
          canonicalAnswer: 'РІР°СЂС„Р°СЂРёРЅ',
        },
        {
          value: 300,
          type: 'text',
          prompt: 'РђРЅС‚РёРґРѕС‚ РїСЂРё РѕС‚СЂР°РІР»РµРЅРёРё РѕРїРёР°С‚Р°РјРё?',
          answersAccept: ['РЅР°Р»РѕРєСЃРѕРЅ', 'naloxone'],
        },
        {
          value: 400,
          type: 'text',
          prompt: 'РњР°РєСЂРѕР»РёРґ СЃ Р°РєС‚РёРІРЅРѕСЃС‚СЊСЋ РїСЂРѕС‚РёРІ Р°С‚РёРїРёС‡РЅС‹С…?',
          answersAccept: ['Р°Р·РёС‚СЂРѕРјРёС†РёРЅ', 'clarithromycin', 'СЌСЂРёС‚СЂРѕРјРёС†РёРЅ'],
        },
        {
          value: 500,
          type: 'text',
          prompt: 'РўРѕРєСЃРёС‡РЅРѕСЃС‚СЊ Р°РјРёРЅРѕРіР»РёРєРѕР·РёРґРѕРІ (РЅР°Р·РѕРІРёС‚Рµ 2 РїРѕР±РѕС‡РєРё)',
          answersAccept: [
            'РЅРµС„СЂРѕС‚РѕРєСЃРёС‡РЅРѕСЃС‚СЊ РѕС‚РѕС‚РѕРєСЃРёС‡РЅРѕСЃС‚СЊ',
            'РѕС‚РѕС‚РѕРєСЃРёС‡РЅРѕСЃС‚СЊ РЅРµС„СЂРѕС‚РѕРєСЃРёС‡РЅРѕСЃС‚СЊ',
          ],
          requireFull: true,
        },
      ],
    },
    {
      "title": "Р”РёР°РіРЅРѕСЃС‚РёРєР° Рё РёРЅСЃС‚СЂСѓРјРµРЅС‚Р°Р»СЊРЅС‹Рµ РјРµС‚РѕРґС‹",
      "tags": ["diagnostics","imaging","easy"],
      "questions": [
        {
          "value": 100,
          "type": "text",
          "prompt": "РџСЂРёР±РѕСЂ РґР»СЏ РёР·РјРµСЂРµРЅРёСЏ Р°СЂС‚РµСЂРёР°Р»СЊРЅРѕРіРѕ РґР°РІР»РµРЅРёСЏ?",
          "answersAccept": ["С‚РѕРЅРѕРјРµС‚СЂ","СЃС„РёРіРјРѕРјР°РЅРѕРјРµС‚СЂ","sphygmomanometer"],
          "answersReject": ["С„РѕРЅРµРЅРґРѕСЃРєРѕРї"],
          "requireFull": false,
          "language": "ru",
          "hint": "РњР°РЅР¶РµС‚Р° + РіСЂСѓС€a РёР»Рё Р°РІС‚РѕРїСЂРёР±РѕСЂ"
        },
        {
          "value": 200,
          "type": "word",
          "prompt": "РЈР—-РёСЃСЃР»РµРґРѕРІР°РЅРёРµ СЃРµСЂРґС†Р° (РѕРґРЅРѕ СЃР»РѕРІРѕ)",
          "answersAccept": ["СЌС…РѕРєР°СЂРґРёРѕРіСЂР°С„РёСЏ","СЌС…РѕРєРі","СЌС…Рѕ-РєРі","echocardiography"],
          "canonicalAnswer": "СЌС…РѕРєР°СЂРґРёРѕРіСЂР°С„РёСЏ",
          "hint": "Echo..."
        },
        {
          "value": 300,
          "type": "text",
          "prompt": "РђРЅР°Р»РёР·, РѕС‚СЂР°Р¶Р°СЋС‰РёР№ СЃСЂРµРґРЅРёР№ СѓСЂРѕРІРµРЅСЊ РіР»СЋРєРѕР·С‹ Р·Р° 2вЂ“3 РјРµСЃСЏС†Р°?",
          "answersAccept": ["РіР»РёРєРёСЂРѕРІР°РЅРЅС‹Р№ РіРµРјРѕРіР»РѕР±РёРЅ","hba1c","hb a1c"],
          "requireFull": false,
          "language": "ru",
          "hint": "HbвЂ¦"
        },
        {
          "value": 400,
          "type": "text",
          "prompt": "РњРµС‚РѕРґ РІРёР·СѓР°Р»РёР·Р°С†РёРё СЃ РїРѕСЃР»РѕР№РЅС‹РјРё СЃСЂРµР·Р°РјРё Рё РёРѕРЅРёР·РёСЂСѓСЋС‰РёРј РёР·Р»СѓС‡РµРЅРёРµРј?",
          "answersAccept": ["РєРѕРјРїСЊСЋС‚РµСЂРЅР°СЏ С‚РѕРјРѕРіСЂР°С„РёСЏ","РєС‚","computed tomography","ct"],
          "answersReject": ["РјСЂС‚","СѓР»СЊС‚СЂР°Р·РІСѓРє","СѓР·Рё"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 500,
          "type": "text",
          "prompt": "РСЃСЃР»РµРґРѕРІР°РЅРёРµ С„СѓРЅРєС†РёРё РІРЅРµС€РЅРµРіРѕ РґС‹С…Р°РЅРёСЏ СЃ С„РѕСЂСЃРёСЂРѕРІР°РЅРЅС‹Рј РІС‹РґРѕС…РѕРј?",
          "answersAccept": ["СЃРїРёСЂРѕРјРµС‚СЂРёСЏ","СЃРїРёСЂРѕРіСЂР°С„РёСЏ","spirometry"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 600,
          "type": "word",
          "prompt": "РСЃСЃР»РµРґРѕРІР°РЅРёРµ СЃРѕСЃСѓРґРѕРІ СЃ РєРѕРЅС‚СЂР°СЃС‚РѕРј (РѕРґРЅРѕ СЃР»РѕРІРѕ)",
          "answersAccept": ["Р°РЅРіРёРѕРіСЂР°С„РёСЏ","angiography"],
          "canonicalAnswer": "Р°РЅРіРёРѕРіСЂР°С„РёСЏ",
          "hint": "РђРЅРіРёРѕ-вЂ¦"
        }
      ]
    },
    {
      "title": "РњРёРєСЂРѕР±РёРѕР»РѕРіРёСЏ Рё РёРЅС„РµРєС†РёРё",
      "tags": ["micro","id"],
      "questions": [
        {
          "value": 100,
          "type": "text",
          "prompt": "Р’РѕР·Р±СѓРґРёС‚РµР»СЊ С‚СѓР±РµСЂРєСѓР»С‘Р·Р°?",
          "answersAccept": ["РјРёРєРѕР±Р°РєС‚РµСЂРёСЏ С‚СѓР±РµСЂРєСѓР»С‘Р·Р°","mycobacterium tuberculosis","РїР°Р»РѕС‡РєР° РєРѕС…Р°","РєРѕРєРµРІР°СЏ РїР°Р»РѕС‡РєР°вЂ” РЅРµС‚"], 
          "answersReject": ["Р±РѕСЂРґРµС‚РµР»Р»Р°","СЃС‚СЂРµРїС‚РѕРєРѕРєРє","СЃС‚Р°С„РёР»РѕРєРѕРєРє"],
          "requireFull": false,
          "language": "ru",
          "hint": "РџР°Р»РѕС‡РєР° РљРѕС…Р°"
        },
        {
          "value": 200,
          "type": "word",
          "prompt": "РљРѕРєРє, РІС‹Р·С‹РІР°СЋС‰РёР№ Р°РЅРіРёРЅСѓ Рё СЃРєР°СЂР»Р°С‚РёРЅСѓ (РѕРґРЅРѕ СЃР»РѕРІРѕ)",
          "answersAccept": ["СЃС‚СЂРµРїС‚РѕРєРѕРєРє","streptococcus"],
          "canonicalAnswer": "СЃС‚СЂРµРїС‚РѕРєРѕРєРє"
        },
        {
          "value": 300,
          "type": "text",
          "prompt": "РђРЅС‚РёР±РёРѕС‚РёРє РІС‹Р±РѕСЂР° РїСЂРё СЃРёС„РёР»РёСЃРµ?",
          "answersAccept": ["РїРµРЅРёС†РёР»Р»РёРЅ","benzathine penicillin","Р±РµРЅР·Р°С‚РёРЅРѕРІС‹Р№ РїРµРЅРёС†РёР»Р»РёРЅ"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 400,
          "type": "text",
          "prompt": "РћСЃРЅРѕРІРЅРѕР№ РїСѓС‚СЊ РїРµСЂРµРґР°С‡Рё РіРµРїР°С‚РёС‚Р° A?",
          "answersAccept": ["С„РµРєР°Р»СЊРЅРѕ-РѕСЂР°Р»СЊРЅС‹Р№","СЌРЅС‚РµСЂР°Р»СЊРЅС‹Р№","fecal-oral"],
          "answersReject": ["РїР°СЂРµРЅС‚РµСЂР°Р»СЊРЅС‹Р№","РїРѕР»РѕРІРѕР№","РІРѕР·РґСѓС€РЅРѕ-РєР°РїРµР»СЊРЅС‹Р№"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 500,
          "type": "text",
          "prompt": "РџСЂРµРїР°СЂР°С‚ РїРµСЂРІРѕР№ Р»РёРЅРёРё РїСЂРё С‚СѓР±РµСЂРєСѓР»С‘Р·Рµ, РІС‹Р·С‹РІР°СЋС‰РёР№ РЅРµР№СЂРѕРїР°С‚РёСЋ РїСЂРё РґРµС„РёС†РёС‚Рµ B6?",
          "answersAccept": ["РёР·РѕРЅРёР°Р·РёРґ","isoniazid","inh"],
          "requireFull": false,
          "language": "ru",
          "hint": "РљРѕРјР±РёРЅРёСЂСѓСЋС‚ СЃ РїРёСЂРёРґРѕРєСЃРёРЅРѕРј"
        },
        {
          "value": 600,
          "type": "word",
          "prompt": "Р РѕРґ Р±Р°РєС‚РµСЂРёР№ вЂ” РІРѕР·Р±СѓРґРёС‚РµР»СЊ РєРѕРєР»СЋС€Р° (РѕРґРЅРѕ СЃР»РѕРІРѕ)",
          "answersAccept": ["Р±РѕСЂРґРµС‚РµР»Р»Р°","bordetella"],
          "canonicalAnswer": "Р±РѕСЂРґРµС‚РµР»Р»Р°"
        }
      ]
    },
    {
      "title": "РџР°С‚РѕС„РёР·РёРѕР»РѕРіРёСЏ Рё СЃРёРјРїС‚РѕРјС‹",
      "tags": ["pathophys","symptoms"],
      "questions": [
        {
          "value": 100,
          "type": "text",
          "prompt": "РўРµСЂРјРёРЅ РґР»СЏ Р§РЎРЎ > 100/РјРёРЅ РІ РїРѕРєРѕРµ?",
          "answersAccept": ["С‚Р°С…РёРєР°СЂРґРёСЏ","tachycardia"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 200,
          "type": "word",
          "prompt": "РЎРЅРёР¶РµРЅРёРµ РєРѕРЅС†РµРЅС‚СЂР°С†РёРё РіРµРјРѕРіР»РѕР±РёРЅР°/СЌСЂРёС‚СЂРѕС†РёС‚РѕРІ (РѕРґРЅРѕ СЃР»РѕРІРѕ)",
          "answersAccept": ["Р°РЅРµРјРёСЏ","anemia"],
          "canonicalAnswer": "Р°РЅРµРјРёСЏ"
        },
        {
          "value": 300,
          "type": "text",
          "prompt": "РЎРєРѕРїР»РµРЅРёРµ Р¶РёРґРєРѕСЃС‚Рё РІ Р±СЂСЋС€РЅРѕР№ РїРѕР»РѕСЃС‚Рё РЅР°Р·С‹РІР°РµС‚СЃСЏвЂ¦",
          "answersAccept": ["Р°СЃС†РёС‚","ascites"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 400,
          "type": "text",
          "prompt": "РЎРёРјРїС‚РѕРј вЂ” Р±РѕР»РµР·РЅРµРЅРЅР°СЏ С‡СѓРІСЃС‚РІРёС‚РµР»СЊРЅРѕСЃС‚СЊ Рє СЃРІРµС‚Сѓ?",
          "answersAccept": ["С„РѕС‚РѕС„РѕР±РёСЏ","СЃРІРµС‚РѕР±РѕСЏР·РЅСЊ","photophobia"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 500,
          "type": "text",
          "prompt": "РўРёРї Р¶РµР»С‚СѓС…Рё РїСЂРё РјР°СЃСЃРёРІРЅРѕРј РіРµРјРѕР»РёР·Рµ?",
          "answersAccept": ["РіРµРјРѕР»РёС‚РёС‡РµСЃРєР°СЏ","РЅР°РґРїРµС‡РµРЅРѕС‡РЅР°СЏ","hemolytic"],
          "answersReject": ["РїРµС‡РµРЅРѕС‡РЅР°СЏ","РїРѕРґРїРµС‡РµРЅРѕС‡РЅР°СЏ","РјРµС…Р°РЅРёС‡РµСЃРєР°СЏ"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 600,
          "type": "word",
          "prompt": "РћС‚СЃСѓС‚СЃС‚РІРёРµ РјРѕС‡Рё (< 100 РјР»/СЃСѓС‚) (РѕРґРЅРѕ СЃР»РѕРІРѕ)",
          "answersAccept": ["Р°РЅСѓСЂРёСЏ","anuria"],
          "canonicalAnswer": "Р°РЅСѓСЂРёСЏ"
        }
      ]
    },
    {
      "title": "РќРµРѕС‚Р»РѕР¶РЅР°СЏ РїРѕРјРѕС‰СЊ",
      "tags": ["er","emergency"],
      "questions": [
        {
          "value": 100,
          "type": "text",
          "prompt": "РџСЂРµРїР°СЂР°С‚ РїРµСЂРІРѕР№ Р»РёРЅРёРё РїСЂРё Р°РЅР°С„РёР»Р°РєСЃРёРё (РІ/Рј)?",
          "answersAccept": ["Р°РґСЂРµРЅР°Р»РёРЅ","СЌРїРёРЅРµС„СЂРёРЅ","epinephrine"],
          "answersReject": ["Р°РЅС‚РёРіРёСЃС‚Р°РјРёРЅРЅС‹Рµ","СЃС‚РµСЂРѕРёРґС‹"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 200,
          "type": "word",
          "prompt": "Р’РѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµ РїСЂРѕС…РѕРґРёРјРѕСЃС‚Рё РґС‹С…Р°С‚РµР»СЊРЅС‹С… РїСѓС‚РµР№ С‚СЂСѓР±РєРѕР№ (РѕРґРЅРѕ СЃР»РѕРІРѕ)",
          "answersAccept": ["РёРЅС‚СѓР±Р°С†РёСЏ","intubation"],
          "canonicalAnswer": "РёРЅС‚СѓР±Р°С†РёСЏ"
        },
        {
          "value": 300,
          "type": "text",
          "prompt": "РђРЅС‚РёРґРѕС‚ РїСЂРё РїРµСЂРµРґРѕР·РёСЂРѕРІРєРµ Р±РµРЅР·РѕРґРёР°Р·РµРїРёРЅРѕРІ?",
          "answersAccept": ["С„Р»СѓРјР°Р·РµРЅРёР»","flumazenil"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 400,
          "type": "text",
          "prompt": "РџСЂРµРїР°СЂР°С‚ РґР»СЏ РєРѕСЂСЂРµРєС†РёРё С‚СЏР¶С‘Р»РѕР№ РіРёРїРѕРіР»РёРєРµРјРёРё РїСЂРё РѕС‚СЃСѓС‚СЃС‚РІРёРё РІРµРЅРѕР·РЅРѕРіРѕ РґРѕСЃС‚СѓРїР° (РІ/Рј/Рї/Рє)?",
          "answersAccept": ["РіР»СЋРєР°РіРѕРЅ","glucagon"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 500,
          "type": "text",
          "prompt": "РЎСЂРµРґСЃС‚РІРѕ РґР»СЏ СЃС‚Р°Р±РёР»РёР·Р°С†РёРё РєР°СЂРґРёРѕРјРµРјР±СЂР°РЅ РїСЂРё РіРёРїРµСЂРєР°Р»РёРµРјРёРё?",
          "answersAccept": ["РєР°Р»СЊС†РёСЏ РіР»СЋРєРѕРЅР°С‚","РєР°Р»СЊС†РёСЏ С…Р»РѕСЂРёРґ","calcium gluconate","calcium chloride"],
          "requireFull": false,
          "language": "ru"
        },
        {
          "value": 600,
          "type": "word",
          "prompt": "РЈСЃС‚СЂРѕР№СЃС‚РІРѕ/РїСЂРёС‘Рј РґР»СЏ Р¶С‘СЃС‚РєРѕР№ РєРѕРјРїСЂРµСЃСЃРёРё РєСЂРѕРІРѕС‚РµС‡РµРЅРёСЏ РєРѕРЅРµС‡РЅРѕСЃС‚Рё (РѕРґРЅРѕ СЃР»РѕРІРѕ)",
          "answersAccept": ["С‚СѓСЂРЅРёРєРµС‚","Р¶РіСѓС‚","tourniquet"],
          "canonicalAnswer": "С‚СѓСЂРЅРёРєРµС‚",
          "hint": "РђРЅРіР». tourniquet"
        }
      ]
    }
  ],
};

function toQuestionType(v: string): QuestionType {
  if (v === 'word') return QuestionType.word;
  return QuestionType.text;
}

async function deleteCategoryQuestionsCascade(categoryId: string) {
  // Collect questions in the category
  const questions = await prisma.question.findMany({ where: { categoryId }, select: { id: true } });
  if (questions.length === 0) return;
  const qIds = questions.map((q) => q.id);

  // Collect SuperQuestions linked to these questions
  const supers = await prisma.superQuestion.findMany({ where: { questionId: { in: qIds } }, select: { id: true } });
  const sqIds = supers.map((s) => s.id);

  // Delete RoomSuperCells that reference those SuperQuestions
  if (sqIds.length > 0) {
    await prisma.roomSuperCell.deleteMany({ where: { superQuestionId: { in: sqIds } } });
    await prisma.superQuestion.deleteMany({ where: { id: { in: sqIds } } });
  }

  // Finally delete questions in this category
  await prisma.question.deleteMany({ where: { id: { in: qIds } } });
}

async function seed() {
  for (const cat of data.categories) {
    // Ensure category exists (upsert by title)
    const existing = await prisma.category.findUnique({ where: { title: cat.title } });
    let categoryId: string;
    if (!existing) {
      const created = await prisma.category.create({
        data: {
          title: cat.title,
          tags: cat.tags ?? [],
        },
      });
      categoryId = created.id;
    } else {
      categoryId = existing.id;
      // Clear existing questions to avoid duplicates on reseed (handle FKs)
      await deleteCategoryQuestionsCascade(categoryId);
      // Optionally update tags/title if changed
      await prisma.category.update({
        where: { id: categoryId },
        data: { title: cat.title, tags: cat.tags ?? [] },
      });
    }

    for (const q of cat.questions) {
      const answersAccept = (q as any).answersAccept ?? [];
      const answersReject = (q as any).answersReject ?? [];
      const canonical = (q as any).canonicalAnswer || answersAccept[0] || '';
      if (!canonical) {
        throw new Error(`Question '${q.prompt}' has no canonical answer or accept list`);
      }

      await prisma.question.create({
        data: {
          type: toQuestionType(q.type),
          prompt: q.prompt,
          rawAnswer: canonical,
          canonicalAnswer: canonical,
          value: q.value ?? 0,
          answersAccept,
          answersReject,
          requireFull: q.requireFull ?? false,
          language: (q as any).language ?? null,
          hint: (q as any).hint ?? null,
          categoryId,
        },
      });
    }
  }
}

// --- User-provided medical categories/questions (RU) ---
async function seedUserProvided() {
  const categories: Array<{
    title: string;
    tags?: string[];
    questions: Array<{
      value: number;
      type: 'word' | 'text';
      prompt: string;
      answersAccept: string[];
      canonicalAnswer?: string;
      requireFull?: boolean;
      language?: string;
    }>;
  }> = [
    {
      title: 'Р­С‚РёРєР° Рё РїСЂР°РІРѕ',
      tags: ['med', 'ethics'],
      questions: [
        { value: 100, type: 'word', prompt: 'РљР°Рє РЅР°Р·С‹РІР°РµС‚СЃСЏ РїСЂР°РІРѕ РїР°С†РёРµРЅС‚Р° РѕС‚РєР°Р·Р°С‚СЊСЃСЏ РѕС‚ Р»РµС‡РµРЅРёСЏ РїРѕСЃР»Рµ РёРЅС„РѕСЂРјРёСЂРѕРІР°РЅРёСЏ?', answersAccept: ['РёРЅС„РѕСЂРјРёСЂРѕРІР°РЅРЅС‹Р№ РѕС‚РєР°Р·'], canonicalAnswer: 'РёРЅС„РѕСЂРјРёСЂРѕРІР°РЅРЅС‹Р№ РѕС‚РєР°Р·', language: 'ru' },
        { value: 100, type: 'word', prompt: 'РљР°Рє РЅР°Р·С‹РІР°РµС‚СЃСЏ РѕР±СЏР·Р°РЅРЅРѕСЃС‚СЊ РІСЂР°С‡Р° С…СЂР°РЅРёС‚СЊ СЃРІРµРґРµРЅРёСЏ Рѕ РїР°С†РёРµРЅС‚Рµ?', answersAccept: ['РјРµРґРёС†РёРЅСЃРєР°СЏ С‚Р°Р№РЅР°'], canonicalAnswer: 'РјРµРґРёС†РёРЅСЃРєР°СЏ С‚Р°Р№РЅР°', language: 'ru' },
        { value: 200, type: 'word', prompt: 'РљР°Рє РЅР°Р·С‹РІР°РµС‚СЃСЏ РїСЂРёРЅС†РёРї СѓРІР°Р¶РµРЅРёСЏ СЃР°РјРѕСЃС‚РѕСЏС‚РµР»СЊРЅС‹С… СЂРµС€РµРЅРёР№ РїР°С†РёРµРЅС‚Р°?', answersAccept: ['РїСЂРёРЅС†РёРї Р°РІС‚РѕРЅРѕРјРёРё'], canonicalAnswer: 'РїСЂРёРЅС†РёРї Р°РІС‚РѕРЅРѕРјРёРё', language: 'ru' },
        { value: 200, type: 'word', prompt: 'РљР°Рє РЅР°Р·С‹РІР°РµС‚СЃСЏ РѕР±СЏР·Р°РЅРЅРѕСЃС‚СЊ РґРµР№СЃС‚РІРѕРІР°С‚СЊ РІ РёРЅС‚РµСЂРµСЃР°С… РїР°С†РёРµРЅС‚Р°?', answersAccept: ['РїСЂРёРЅС†РёРї Р±Р»Р°РіРѕРґРµСЏРЅРёСЏ'], canonicalAnswer: 'РїСЂРёРЅС†РёРї Р±Р»Р°РіРѕРґРµСЏРЅРёСЏ', language: 'ru' },
        { value: 400, type: 'word', prompt: 'РљР°Рє РЅР°Р·С‹РІР°РµС‚СЃСЏ Р»РёС†Рѕ, СѓРїРѕР»РЅРѕРјРѕС‡РµРЅРЅРѕРµ РїСЂРёРЅРёРјР°С‚СЊ СЂРµС€РµРЅРёСЏ Р·Р° РЅРµРґРµРµСЃРїРѕСЃРѕР±РЅРѕРіРѕ?', answersAccept: ['Р·Р°РєРѕРЅРЅС‹Р№ РїСЂРµРґСЃС‚Р°РІРёС‚РµР»СЊ'], canonicalAnswer: 'Р·Р°РєРѕРЅРЅС‹Р№ РїСЂРµРґСЃС‚Р°РІРёС‚РµР»СЊ', language: 'ru' },
        { value: 400, type: 'word', prompt: 'РљР°Рє РЅР°Р·С‹РІР°РµС‚СЃСЏ СЃРёС‚СѓР°С†РёСЏ, РґРѕРїСѓСЃРєР°СЋС‰Р°СЏ РїРѕРјРѕС‰СЊ Р±РµР· СЃРѕРіР»Р°СЃРёСЏ РёР·-Р·Р° СѓРіСЂРѕР·С‹ Р¶РёР·РЅРё?', answersAccept: ['СЌРєСЃС‚СЂРµРЅРЅР°СЏ СЃРёС‚СѓР°С†РёСЏ'], canonicalAnswer: 'СЌРєСЃС‚СЂРµРЅРЅР°СЏ СЃРёС‚СѓР°С†РёСЏ', language: 'ru' },
        { value: 500, type: 'word', prompt: 'РљР°Рє РЅР°Р·С‹РІР°РµС‚СЃСЏ РїСЂРёРЅС†РёРї СЂР°РІРЅРѕРіРѕ СЂР°СЃРїСЂРµРґРµР»РµРЅРёСЏ СЂРµСЃСѓСЂСЃРѕРІ РїРѕ РєР»РёРЅРёС‡РµСЃРєРѕР№ РїРѕС‚СЂРµР±РЅРѕСЃС‚Рё?', answersAccept: ['РїСЂРёРЅС†РёРї СЃРїСЂР°РІРµРґР»РёРІРѕСЃС‚Рё'], canonicalAnswer: 'РїСЂРёРЅС†РёРї СЃРїСЂР°РІРµРґР»РёРІРѕСЃС‚Рё', language: 'ru' },
        { value: 500, type: 'word', prompt: 'РљР°Рє РЅР°Р·С‹РІР°РµС‚СЃСЏ СЋСЂРёРґРёС‡РµСЃРєРёР№ СЃС‚Р°С‚СѓСЃ РѕР±С‰РµР№ СЃРїРѕСЃРѕР±РЅРѕСЃС‚Рё Рє СЃРґРµР»РєР°Рј Рё СЂРµС€РµРЅРёСЏРј?', answersAccept: ['РґРµРµСЃРїРѕСЃРѕР±РЅРѕСЃС‚СЊ'], canonicalAnswer: 'РґРµРµСЃРїРѕСЃРѕР±РЅРѕСЃС‚СЊ', language: 'ru' },
      ],
    },
    {
      title: 'РђРЅР°С‚РѕРјРёСЏ (Р±РµР· С„РѕС‚Рѕ, С‚РѕР»СЊРєРѕ РѕРїРёСЃР°РЅРёРµ)',
      tags: ['anat', 'med'],
      questions: [
        { value: 100, type: 'word', prompt: 'Р”РІСѓСЃС‚РІРѕСЂС‡Р°С‚С‹Р№ РєР»Р°РїР°РЅ РјРµР¶РґСѓ Р»РµРІС‹Рј РїСЂРµРґСЃРµСЂРґРёРµРј Рё Р»РµРІС‹Рј Р¶РµР»СѓРґРѕС‡РєРѕРј.', answersAccept: ['valva mitralis'], canonicalAnswer: 'valva mitralis', language: 'ru' },
        { value: 100, type: 'word', prompt: 'РљСЂСѓРїРЅРµР№С€Р°СЏ РїР°СЂРµРЅС…РёРјР°С‚РѕР·РЅР°СЏ Р¶РµР»РµР·Р° Р±СЂСЋС€РЅРѕР№ РїРѕР»РѕСЃС‚Рё', answersAccept: ['hepar'], canonicalAnswer: 'hepar', language: 'ru' },
        { value: 200, type: 'word', prompt: 'РџСЂРѕРґРѕР»Р¶РµРЅРёРµ a. axillaris; РёРґС‘С‚ РїРѕ РјРµРґРёР°Р»СЊРЅРѕР№ Р±РѕСЂРѕР·РґРµ РїР»РµС‡Р°; РґР°С‘С‚ a. profunda brachii.', answersAccept: ['arteria brachialis'], canonicalAnswer: 'arteria brachialis', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Р•РґРёРЅСЃС‚РІРµРЅРЅР°СЏ РєРѕСЃС‚СЊ РїР»РµС‡РµРІРѕРіРѕ РїРѕСЏСЃР°, СЃРѕС‡Р»РµРЅСЏРµС‚СЃСЏ СЃ СЂСѓРєРѕСЏС‚РєРѕР№ РіСЂСѓРґРёРЅС‹ Рё Р°РєСЂРѕРјРёРѕРЅРѕРј.', answersAccept: ['clavicula'], canonicalAnswer: 'clavicula', language: 'ru' },
        { value: 300, type: 'word', prompt: 'РЎРєР»Р°РґРєР° Р±СЂСЋС€РёРЅС‹ СЃ В«РїРѕСЂС‚Р°Р»СЊРЅРѕР№ С‚СЂРёР°РґРѕР№В»: ductus hepaticus communis, v. portae, a. hepatica propria.', answersAccept: ['ligamentum hepatoduodenale'], canonicalAnswer: 'ligamentum hepatoduodenale', language: 'ru' },
        { value: 300, type: 'word', prompt: 'РЎС„РёРЅРєС‚РµСЂ, СЂРµРіСѓР»РёСЂСѓСЋС‰РёР№ РѕРїРѕСЂРѕР¶РЅРµРЅРёРµ Р¶РµР»СѓРґРєР° РІ РґРІРµРЅР°РґС†Р°С‚РёРїРµСЂСЃС‚РЅСѓСЋ РєРёС€РєСѓ.', answersAccept: ['sphincter pylori'], canonicalAnswer: 'sphincter pylori', language: 'ru' },
      ],
    },
    {
      title: 'Р¤Р°СЂРјР°РєРѕР»РѕРіРёСЏ: РјРµС…Р°РЅРёР·Рј РґРµР№СЃС‚РІРёСЏ',
      tags: ['pharm', 'med'],
      questions: [
        // РџСЂРѕРїСѓС‰РµРЅРѕ: РЅРµС‚ РѕС‚РІРµС‚Р° Сѓ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
        // { value: 200, type: 'word', prompt: 'РћСЃРЅРѕРІРЅРѕР№ Р°РЅС‚РёРєРѕР°РіСѓР»СЏРЅС‚РЅС‹Р№ СЌС„С„РµРєС‚ РќРњР“ вЂ” РїСЂРµРёРјСѓС‰РµСЃС‚РІРµРЅРЅР°СЏ РёРЅР°РєС‚РёРІР°С†РёСЏ РєР°РєРѕРіРѕ С„Р°РєС‚РѕСЂР°?', answersAccept: ['С„Р°РєС‚РѕСЂ РҐР°'], canonicalAnswer: 'С„Р°РєС‚РѕСЂ РҐР°', language: 'ru' },
      ],
    },
    {
      title: 'РЇС‚СЂРѕРіРµРЅРЅС‹Рµ РѕСЃР»РѕР¶РЅРµРЅРёСЏ',
      tags: ['pharm', 'complications', 'med'],
      questions: [
        { value: 100, type: 'word', prompt: 'Р”Р»РёС‚РµР»СЊРЅС‹Р№ РїСЂРёС‘Рј РќРџР’Рџ; Р¶РµР»СѓРґРѕС‡РЅРѕРµ РєСЂРѕРІРѕС‚РµС‡РµРЅРёРµ, РїРѕР»РѕР¶РёС‚РµР»СЊРЅС‹Р№ С‚РµСЃС‚ РЅР° СЃРєСЂС‹С‚СѓСЋ РєСЂРѕРІСЊ. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['СЏР·РІР° Р¶РµР»СѓРґРєР°'], canonicalAnswer: 'СЏР·РІР° Р¶РµР»СѓРґРєР°', language: 'ru' },
        { value: 100, type: 'word', prompt: 'РўРµСЂР°РїРёСЏ РѕРїРёРѕРёРґР°РјРё; СЃРЅРёР¶РµРЅРёРµ РїРµСЂРёСЃС‚Р°Р»СЊС‚РёРєРё, С‚РІС‘СЂРґС‹Р№ СЃС‚СѓР». РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['Р·Р°РїРѕСЂ'], canonicalAnswer: 'Р·Р°РїРѕСЂ', language: 'ru' },
        { value: 100, type: 'word', prompt: 'РРђРџР¤ РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РґР»СЏ Р»РµС‡РµРЅРёСЏ Р°СЂС‚РµСЂРёР°Р»СЊРЅРѕР№ РіРёРїРµСЂС‚РµРЅР·РёРё. РќР°Р·РѕРІРёС‚Рµ СЃР°РјРѕРµ С‡Р°СЃС‚РѕРµ РѕСЃР»РѕР¶РЅРµРЅРёРµ РїСЂРё РёСЃРїРѕР»СЊР·РѕРІР°РЅРёРё РґР°РЅРЅРѕРіРѕ РїСЂРµРїР°СЂР°С‚Р°?', answersAccept: ['СЃСѓС…РѕР№ РєР°С€РµР»СЊ'], canonicalAnswer: 'СЃСѓС…РѕР№ РєР°С€РµР»СЊ', language: 'ru' },
        { value: 100, type: 'word', prompt: 'РўРёР°Р·РёРґРЅС‹Р№ РґРёСѓСЂРµС‚РёРє; СЃР»Р°Р±РѕСЃС‚СЊ, Р°СЂРёС‚РјРёСЏ, РЅРёР·РєРёР№ KвЃє РІ СЃС‹РІРѕСЂРѕС‚РєРµ. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['РіРёРїРѕРєР°Р»РёРµРјРёСЏ'], canonicalAnswer: 'РіРёРїРѕРєР°Р»РёРµРјРёСЏ', language: 'ru' },

        { value: 200, type: 'word', prompt: 'РњРµС‚С„РѕСЂРјРёРЅ РїСЂРё СЃР°С…Р°СЂРЅРѕРј РґРёР°Р±РµС‚Рµ; С‚Р°С…РёРїРЅРѕСЌ, РІС‹СЃРѕРєРёР№ Р»Р°РєС‚Р°С‚ Р±РµР· РіРёРїРѕРєСЃРёРё. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['Р»Р°РєС‚Р°С‚Р°С†РёРґРѕР·'], canonicalAnswer: 'Р»Р°РєС‚Р°С‚Р°С†РёРґРѕР·', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Р‘РµС‚Р°-Р±Р»РѕРєР°С‚РѕСЂ Сѓ РїР°С†РёРµРЅС‚Р° СЃ Р±СЂРѕРЅС…РёР°Р»СЊРЅРѕР№ Р°СЃС‚РјРѕР№; СЃРІРёСЃС‚СЏС‰РµРµ РґС‹С…Р°РЅРёРµ, СЌРєСЃРїРёСЂР°С‚РѕСЂРЅР°СЏ РѕРґС‹С€РєР°. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['Р±СЂРѕРЅС…РѕСЃРїР°Р·Рј'], canonicalAnswer: 'Р±СЂРѕРЅС…РѕСЃРїР°Р·Рј', language: 'ru' },
        { value: 200, type: 'word', prompt: 'РђРјРёРЅРѕРіР»РёРєРѕР·РёРґ; СЂРѕСЃС‚ РєСЂРµР°С‚РёРЅРёРЅР°, С†РёР»РёРЅРґСЂСѓСЂРёСЏ. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['РЅРµС„СЂРѕС‚РѕРєСЃРёС‡РЅРѕСЃС‚СЊ'], canonicalAnswer: 'РЅРµС„СЂРѕС‚РѕРєСЃРёС‡РЅРѕСЃС‚СЊ', language: 'ru' },

        { value: 300, type: 'word', prompt: 'Р¤С‚РѕСЂС…РёРЅРѕР»РѕРЅ Сѓ РїРѕР¶РёР»РѕРіРѕ РїР°С†РёРµРЅС‚Р°; РІРЅРµР·Р°РїРЅР°СЏ Р±РѕР»СЊ РІ Р°С…РёР»Р»РѕРІРѕР№ РѕР±Р»Р°СЃС‚Рё, РґРµС„РµРєС‚ РїСЂРё РїР°Р»СЊРїР°С†РёРё. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['СЂР°Р·СЂС‹РІ СЃСѓС…РѕР¶РёР»РёСЏ'], canonicalAnswer: 'СЂР°Р·СЂС‹РІ СЃСѓС…РѕР¶РёР»РёСЏ', language: 'ru' },
        { value: 300, type: 'word', prompt: 'РЎС‚Р°С‚РёРЅ РІ РІС‹СЃРѕРєРѕР№ РґРѕР·Рµ; РјРёР°Р»РіРёРё, РІС‹СЃРѕРєРёР№ РљР¤Рљ, С‚С‘РјРЅР°СЏ РјРѕС‡Р°. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['СЂР°Р±РґРѕРјРёРѕР»РёР·'], canonicalAnswer: 'СЂР°Р±РґРѕРјРёРѕР»РёР·', language: 'ru' },

        { value: 400, type: 'word', prompt: 'РњРµС‚РѕС‚СЂРµРєСЃР°С‚; Р±Р»РµРґРЅРѕСЃС‚СЊ, РёРЅС„РµРєС†РёРё, С‚СЂРѕРјР±РѕС†РёС‚РѕРїРµРЅРёСЏ, СѓРіРЅРµС‚РµРЅР° С„СѓРЅРєС†РёСЏ РєРѕСЃС‚РЅРѕРіРѕ РјРѕР·РіР°. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['РїР°РЅС†РёС‚РѕРїРµРЅРёСЏ'], canonicalAnswer: 'РїР°РЅС†РёС‚РѕРїРµРЅРёСЏ', language: 'ru' },
        { value: 400, type: 'word', prompt: 'РЎРїРёСЂРѕРЅРѕР»Р°РєС‚РѕРЅ Сѓ РјСѓР¶С‡РёРЅС‹; Р±РѕР»РµР·РЅРµРЅРЅРѕСЃС‚СЊ Рё СѓРІРµР»РёС‡РµРЅРёРµ РјРѕР»РѕС‡РЅС‹С… Р¶РµР»С‘Р·. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['РіРёРЅРµРєРѕРјР°СЃС‚РёСЏ'], canonicalAnswer: 'РіРёРЅРµРєРѕРјР°СЃС‚РёСЏ', language: 'ru' },

        { value: 500, type: 'word', prompt: 'РџРµС‚Р»РµРІРѕР№ РґРёСѓСЂРµС‚РёРє РІ РІС‹СЃРѕРєРёС… РґРѕР·Р°С…; СЃРЅРёР¶РµРЅРёРµ СЃР»СѓС…Р°, С€СѓРј РІ СѓС€Р°С…, РѕР±СЂР°С‚РёРјР°СЏ РіР»СѓС…РѕС‚Р°. РќР°Р·РѕРІРёС‚Рµ РѕСЃР»РѕР¶РЅРµРЅРёРµ.', answersAccept: ['РѕС‚РѕС‚РѕРєСЃРёС‡РЅРѕСЃС‚СЊ'], canonicalAnswer: 'РѕС‚РѕС‚РѕРєСЃРёС‡РЅРѕСЃС‚СЊ', language: 'ru' },
      ],
    },
    {
      title: 'РљР»РёРЅРёС‡РµСЃРєР°СЏ РїСЃРёС…РёР°С‚СЂРёСЏ',
      tags: ['psych', 'med'],
      questions: [
        { value: 100, type: 'word', prompt: 'РћСЃС‚СЂС‹Р№ РїСЂРёСЃС‚СѓРї РёРЅС‚РµРЅСЃРёРІРЅРѕР№ С‚СЂРµРІРѕРіРё СЃ РІРµРіРµС‚Р°С‚РёРІРЅС‹РјРё СЃРёРјРїС‚РѕРјР°РјРё (РїРёРє в‰¤10 РјРёРЅСѓС‚), СЃС‚СЂР°С… СЃРјРµСЂС‚Рё. РќР°Р·РѕРІРёС‚Рµ СЃРѕСЃС‚РѕСЏРЅРёРµ.', answersAccept: ['РїР°РЅРёС‡РµСЃРєР°СЏ Р°С‚Р°РєР°'], canonicalAnswer: 'РїР°РЅРёС‡РµСЃРєР°СЏ Р°С‚Р°РєР°', language: 'ru' },
        { value: 100, type: 'word', prompt: 'РЎРЅРёР¶РµРЅРЅРѕРµ РЅР°СЃС‚СЂРѕРµРЅРёРµ в‰Ґ2 РЅРµРґРµР»СЊ, Р°РЅРіРµРґРѕРЅРёСЏ, СѓС‚РѕРјР»СЏРµРјРѕСЃС‚СЊ, РёРґРµРё РІРёРЅС‹. РќР°Р·РѕРІРёС‚Рµ СЌРїРёР·РѕРґ.', answersAccept: ['РґРµРїСЂРµСЃСЃРёРІРЅС‹Р№ СЌРїРёР·РѕРґ'], canonicalAnswer: 'РґРµРїСЂРµСЃСЃРёРІРЅС‹Р№ СЌРїРёР·РѕРґ', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Р§РµСЂРµР· 2вЂ“3 СЃСѓС‚РѕРє Р°Р±СЃС‚РёРЅРµРЅС†РёРё: С‚СЂРµРјРѕСЂ, РґРµР·РѕСЂРёРµРЅС‚Р°С†РёСЏ, Р·РѕРѕРіР°Р»Р»СЋС†РёРЅР°С†РёРё, РІРµРіРµС‚Р°С‚РёРєР°. РќР°Р·РѕРІРёС‚Рµ СЃРѕСЃС‚РѕСЏРЅРёРµ.', answersAccept: ['Р°Р»РєРѕРіРѕР»СЊРЅС‹Р№ РґРµР»РёСЂРёР№'], canonicalAnswer: 'Р°Р»РєРѕРіРѕР»СЊРЅС‹Р№ РґРµР»РёСЂРёР№', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Р’С‹СЂР°Р¶РµРЅРЅС‹Р№ СЃС‚СЂР°С… РѕС†РµРЅРєРё Рё РІРЅРёРјР°РЅРёСЏ РѕРєСЂСѓР¶Р°СЋС‰РёС…, РёР·Р±РµРіР°РЅРёРµ РїСѓР±Р»РёС‡РЅС‹С… СЃРёС‚СѓР°С†РёР№. РќР°Р·РѕРІРёС‚Рµ СЂР°СЃСЃС‚СЂРѕР№СЃС‚РІРѕ.', answersAccept: ['СЃРѕС†РёР°Р»СЊРЅР°СЏ С„РѕР±РёСЏ'], canonicalAnswer: 'СЃРѕС†РёР°Р»СЊРЅР°СЏ С„РѕР±РёСЏ', language: 'ru' },

        { value: 200, type: 'word', prompt: 'РќР°РІСЏР·С‡РёРІС‹Рµ РјС‹СЃР»Рё Рё СЂРёС‚СѓР°Р»С‹, Р·Р°РЅРёРјР°СЋС‰РёРµ >1 С‡Р°СЃР° РІ РґРµРЅСЊ, РѕСЃРѕР·РЅР°СЋС‚СЃСЏ РєР°Рє СЃРІРѕРё. РќР°Р·РѕРІРёС‚Рµ СЂР°СЃСЃС‚СЂРѕР№СЃС‚РІРѕ.', answersAccept: ['РѕР±СЃРµСЃСЃРёРІРЅРѕ-РєРѕРјРїСѓР»СЊСЃРёРІРЅРѕРµ СЂР°СЃСЃС‚СЂРѕР№СЃС‚РІРѕ'], canonicalAnswer: 'РѕР±СЃРµСЃСЃРёРІРЅРѕ-РєРѕРјРїСѓР»СЊСЃРёРІРЅРѕРµ СЂР°СЃСЃС‚СЂРѕР№СЃС‚РІРѕ', language: 'ru' },
        { value: 200, type: 'word', prompt: 'РџРµСЂРµР¶РёС‚Р°СЏ С‚СЂР°РІРјР°; РЅР°РІСЏР·С‡РёРІС‹Рµ РІРѕСЃРїРѕРјРёРЅР°РЅРёСЏ, РёР·Р±РµРіР°РЅРёРµ, РіРёРїРµСЂРІРѕР·Р±СѓР¶РґРµРЅРёРµ >1 РјРµСЃСЏС†Р°. РќР°Р·РѕРІРёС‚Рµ СЂР°СЃСЃС‚СЂРѕР№СЃС‚РІРѕ.', answersAccept: ['РїРѕСЃС‚С‚СЂР°РІРјР°С‚РёС‡РµСЃРєРѕРµ СЃС‚СЂРµСЃСЃРѕРІРѕРµ СЂР°СЃСЃС‚СЂРѕР№СЃС‚РІРѕ'], canonicalAnswer: 'РїРѕСЃС‚С‚СЂР°РІРјР°С‚РёС‡РµСЃРєРѕРµ СЃС‚СЂРµСЃСЃРѕРІРѕРµ СЂР°СЃСЃС‚СЂРѕР№СЃС‚РІРѕ', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Р”РµС„РёС†РёС‚ РјР°СЃСЃС‹, РёСЃРєР°Р¶С‘РЅРЅС‹Р№ РѕР±СЂР°Р· С‚РµР»Р°, РѕРіСЂР°РЅРёС‡РµРЅРёРµ РїРёС‚Р°РЅРёСЏ, Р°РјРµРЅРѕСЂРµСЏ. РќР°Р·РѕРІРёС‚Рµ СЂР°СЃСЃС‚СЂРѕР№СЃС‚РІРѕ.', answersAccept: ['Р°РЅРѕСЂРµРєСЃРёСЏ РЅРµСЂРІРЅР°СЏ'], canonicalAnswer: 'Р°РЅРѕСЂРµРєСЃРёСЏ РЅРµСЂРІРЅР°СЏ', language: 'ru' },

        { value: 300, type: 'word', prompt: 'РќРµРїРѕРєРѕР»РµР±РёРјР°СЏ СѓР±РµР¶РґС‘РЅРЅРѕСЃС‚СЊ РІ РїСЂРµСЃР»РµРґРѕРІР°РЅРёРё РїСЂРё СЃРѕС…СЂР°РЅРЅРѕР№ Р»РѕРіРёРєРµ РІРЅРµ Р±СЂРµРґРѕРІРѕР№ С‚РµРјС‹. РќР°Р·РѕРІРёС‚Рµ РІРёРґ Р±СЂРµРґР°.', answersAccept: ['Р±СЂРµРґ РїСЂРµСЃР»РµРґРѕРІР°РЅРёСЏ'], canonicalAnswer: 'Р±СЂРµРґ РїСЂРµСЃР»РµРґРѕРІР°РЅРёСЏ', language: 'ru' },
        { value: 300, type: 'word', prompt: 'РњРЅРѕР¶РµСЃС‚РІРµРЅРЅС‹Рµ РјРѕС‚РѕСЂРЅС‹Рµ С‚РёРєРё Рё РІРѕРєР°Р»РёР·Р°С†РёРё, РЅР°С‡Р°Р»Рѕ РІ РґРµС‚СЃС‚РІРµ, РґР»РёС‚РµР»СЊРЅРѕСЃС‚СЊ >1 РіРѕРґР°. РќР°Р·РѕРІРёС‚Рµ СЃРёРЅРґСЂРѕРј.', answersAccept: ['СЃРёРЅРґСЂРѕРј РўСѓСЂРµС‚С‚Р°'], canonicalAnswer: 'СЃРёРЅРґСЂРѕРј РўСѓСЂРµС‚С‚Р°', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Р’ РїРµСЂРІС‹Рµ РґРІРµ РЅРµРґРµР»Рё РїРѕСЃР»Рµ СЂРѕРґРѕРІ вЂ” Р±СЂРµРґ, РіР°Р»Р»СЋС†РёРЅР°С†РёРё, РґРµР·РѕСЂРіР°РЅРёР·Р°С†РёСЏ РїРѕРІРµРґРµРЅРёСЏ. РќР°Р·РѕРІРёС‚Рµ СЃРѕСЃС‚РѕСЏРЅРёРµ.', answersAccept: ['РїРѕСЃР»РµСЂРѕРґРѕРІС‹Р№ РїСЃРёС…РѕР·'], canonicalAnswer: 'РїРѕСЃР»РµСЂРѕРґРѕРІС‹Р№ РїСЃРёС…РѕР·', language: 'ru' },

        { value: 400, type: 'word', prompt: 'РЈР±РµР¶РґС‘РЅРЅРѕСЃС‚СЊ, С‡С‚Рѕ Р±Р»РёР·РєРѕРіРѕ С‡РµР»РѕРІРµРєР° РїРѕРґРјРµРЅРёР»Рё РґРІРѕР№РЅРёРєРѕРј-РѕР±РјР°РЅС‰РёРєРѕРј. РќР°Р·РѕРІРёС‚Рµ СЃРёРЅРґСЂРѕРј.', answersAccept: ['СЃРёРЅРґСЂРѕРј РљР°РїРіСЂР°'], canonicalAnswer: 'СЃРёРЅРґСЂРѕРј РљР°РїРіСЂР°', language: 'ru' },
        { value: 400, type: 'word', prompt: 'РќРёРіРёР»РёСЃС‚РёС‡РµСЃРєРёР№ Р±СЂРµРґ: РѕС‚СЂРёС†Р°РЅРёРµ СЃСѓС‰РµСЃС‚РІРѕРІР°РЅРёСЏ РѕСЂРіР°РЅРѕРІ, СЃРµР±СЏ, РјРёСЂР°. РќР°Р·РѕРІРёС‚Рµ СЃРёРЅРґСЂРѕРј.', answersAccept: ['СЃРёРЅРґСЂРѕРј РљРѕС‚Р°СЂР°'], canonicalAnswer: 'СЃРёРЅРґСЂРѕРј РљРѕС‚Р°СЂР°', language: 'ru' },
        { value: 400, type: 'word', prompt: 'РњСѓС‡РёС‚РµР»СЊРЅРѕРµ РІРЅСѓС‚СЂРµРЅРЅРµРµ Р±РµСЃРїРѕРєРѕР№СЃС‚РІРѕ Рё РїРѕС‚СЂРµР±РЅРѕСЃС‚СЊ РґРІРёРіР°С‚СЊСЃСЏ, С‡Р°СЃС‚Рѕ РЅР° С„РѕРЅРµ РЅРµР№СЂРѕР»РµРїС‚РёРєР°. РќР°Р·РѕРІРёС‚Рµ СЃРѕСЃС‚РѕСЏРЅРёРµ.', answersAccept: ['Р°РєР°С‚РёР·РёСЏ'], canonicalAnswer: 'Р°РєР°С‚РёР·РёСЏ', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Р§СѓРІСЃС‚РІРѕ РѕС‚С‡СѓР¶РґРµРЅРёСЏ СЃРѕР±СЃС‚РІРµРЅРЅРѕРіРѕ В«РЇВ», РІРѕСЃРїСЂРёРЅРёРјР°РµРјРѕРµ РєР°Рє РїРѕСЃС‚РѕСЂРѕРЅРЅРµРµ. РќР°Р·РѕРІРёС‚Рµ С„РµРЅРѕРјРµРЅ.', answersAccept: ['РґРµРїРµСЂСЃРѕРЅР°Р»РёР·Р°С†РёСЏ'], canonicalAnswer: 'РґРµРїРµСЂСЃРѕРЅР°Р»РёР·Р°С†РёСЏ', language: 'ru' },

        { value: 500, type: 'word', prompt: 'Р—Р°СЃС‚С‹РІР°РЅРёРµ РІ РЅРµСѓРґРѕР±РЅРѕР№ РїРѕР·Рµ СЃ СЃРѕС…СЂР°РЅРµРЅРёРµРј РїСЂРёРґР°РЅРЅРѕР№ РїРѕР·С‹ РґР»РёС‚РµР»СЊРЅРѕ. РќР°Р·РѕРІРёС‚Рµ СЃРёРјРїС‚РѕРј.', answersAccept: ['РєР°С‚Р°Р»РµРїСЃРёСЏ'], canonicalAnswer: 'РєР°С‚Р°Р»РµРїСЃРёСЏ', language: 'ru' },
        { value: 500, type: 'word', prompt: 'РЈ С…СЂРѕРЅРёС‡РµСЃРєРѕРіРѕ Р°Р»РєРѕРіРѕР»РёР·РјР° вЂ” РїРѕР»РёРјРѕСЂС„РЅС‹Рµ СЃР»СѓС…РѕРІС‹Рµ РіР°Р»Р»СЋС†РёРЅР°С†РёРё РїСЂРё СЏСЃРЅРѕРј СЃРѕР·РЅР°РЅРёРё. РќР°Р·РѕРІРёС‚Рµ СЃРѕСЃС‚РѕСЏРЅРёРµ.', answersAccept: ['Р°Р»РєРѕРіРѕР»СЊРЅС‹Р№ РіР°Р»Р»СЋС†РёРЅРѕР·'], canonicalAnswer: 'Р°Р»РєРѕРіРѕР»СЊРЅС‹Р№ РіР°Р»Р»СЋС†РёРЅРѕР·', language: 'ru' },
      ],
    },
    {
      title: 'Р­РїРѕРЅРёРјС‹',
      tags: ['eponyms', 'med'],
      questions: [
        { value: 100, type: 'word', prompt: 'Р”РІРёРіР°С‚РµР»СЊРЅР°СЏ С‚СЂРёР°РґР°: С‚СЂРµРјРѕСЂ РїРѕРєРѕСЏ, СЂРёРіРёРґРЅРѕСЃС‚СЊ, Р±СЂР°РґРёРєРёРЅРµР·РёСЏ; РіРёРїРѕРјРёРјРёСЏ, РјРёРєСЂРѕРіСЂР°С„РёСЏ. РќР°Р·РѕРІРёС‚Рµ Р±РѕР»РµР·РЅСЊ.', answersAccept: ['Р±РѕР»РµР·РЅСЊ РџР°СЂРєРёРЅСЃРѕРЅР°'], canonicalAnswer: 'Р±РѕР»РµР·РЅСЊ РџР°СЂРєРёРЅСЃРѕРЅР°', language: 'ru' },
        { value: 100, type: 'word', prompt: 'РҐСЂРѕРЅРёС‡РµСЃРєРёР№ РіРёРїРµСЂРєРѕСЂС‚РёС†РёР·Рј: Р»СѓРЅРѕРѕР±СЂР°Р·РЅРѕРµ Р»РёС†Рѕ, РїСѓСЂРїСѓСЂРЅС‹Рµ СЃС‚СЂРёРё, РїСЂРѕРєСЃРёРјР°Р»СЊРЅР°СЏ РјРёРѕРїР°С‚РёСЏ. РќР°Р·РѕРІРёС‚Рµ СЃРёРЅРґСЂРѕРј.', answersAccept: ['СЃРёРЅРґСЂРѕРј РљСѓС€РёРЅРіР°'], canonicalAnswer: 'СЃРёРЅРґСЂРѕРј РљСѓС€РёРЅРіР°', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Р’РѕСЃРїР°Р»РёС‚РµР»СЊРЅР°СЏ Р±РѕР»СЊ РІ СЃРїРёРЅРµ, РґРІСѓСЃС‚РѕСЂРѕРЅРЅРёР№ СЃР°РєСЂРѕРёР»РёРёС‚, РѕРіСЂР°РЅРёС‡РµРЅРёРµ РіСЂСѓРґРЅРѕР№ СЌРєСЃРєСѓСЂСЃРёРё. РќР°Р·РѕРІРёС‚Рµ Р±РѕР»РµР·РЅСЊ.', answersAccept: ['Р±РѕР»РµР·РЅСЊ Р‘РµС…С‚РµСЂРµРІР°'], canonicalAnswer: 'Р±РѕР»РµР·РЅСЊ Р‘РµС…С‚РµСЂРµРІР°', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Р Р°Р·РіРёР±Р°РЅРёРµ Р±РѕР»СЊС€РѕРіРѕ РїР°Р»СЊС†Р° СЃС‚РѕРїС‹ РїСЂРё С€С‚СЂРёС…РѕРІРѕРј СЂР°Р·РґСЂР°Р¶РµРЅРёРё РїРѕРґРѕС€РІС‹. РќР°Р·РѕРІРёС‚Рµ СЃРёРјРїС‚РѕРј.', answersAccept: ['СЃРёРјРїС‚РѕРј Р‘Р°Р±РёРЅСЃРєРѕРіРѕ'], canonicalAnswer: 'СЃРёРјРїС‚РѕРј Р‘Р°Р±РёРЅСЃРєРѕРіРѕ', language: 'ru' },

        { value: 200, type: 'word', prompt: 'РўСЂРёС„Р°Р·РЅР°СЏ СЃРјРµРЅР° РѕРєСЂР°СЃРєРё РїР°Р»СЊС†РµРІ РЅР° С…РѕР»РѕРґ: Р±Р»РµРґРЅРѕСЃС‚СЊ, С†РёР°РЅРѕР·, РіРёРїРµСЂРµРјРёСЏ. РќР°Р·РѕРІРёС‚Рµ СЃРёРЅРґСЂРѕРј.', answersAccept: ['СЃРёРЅРґСЂРѕРј Р РµР№РЅРѕ'], canonicalAnswer: 'СЃРёРЅРґСЂРѕРј Р РµР№РЅРѕ', language: 'ru' },
        { value: 200, type: 'word', prompt: 'РџСЂРёСЃС‚СѓРїС‹ СЃРёСЃС‚РµРјРЅРѕРіРѕ РіРѕР»РѕРІРѕРєСЂСѓР¶РµРЅРёСЏ, С„Р»СЋРєС‚СѓРёСЂСѓСЋС‰Р°СЏ РЅРµР№СЂРѕСЃРµРЅСЃРѕСЂРЅР°СЏ С‚СѓРіРѕСѓС…РѕСЃС‚СЊ, С€СѓРј РІ СѓС…Рµ. РќР°Р·РѕРІРёС‚Рµ Р±РѕР»РµР·РЅСЊ.', answersAccept: ['Р±РѕР»РµР·РЅСЊ РњРµРЅСЊРµСЂР°'], canonicalAnswer: 'Р±РѕР»РµР·РЅСЊ РњРµРЅСЊРµСЂР°', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Р“РёРїРµСЂРїРёРіРјРµРЅС‚Р°С†РёСЏ РєРѕР¶РЅС‹С… СЃРєР»Р°РґРѕРє, РіРёРїРѕРЅР°С‚СЂРёРµРјРёСЏ, РіРёРїРµСЂРєР°Р»РёРµРјРёСЏ, РЅРёР·РєРёР№ РєРѕСЂС‚РёР·РѕР». РќР°Р·РѕРІРёС‚Рµ Р±РѕР»РµР·РЅСЊ.', answersAccept: ['Р±РѕР»РµР·РЅСЊ РђРґРґРёСЃРѕРЅР°'], canonicalAnswer: 'Р±РѕР»РµР·РЅСЊ РђРґРґРёСЃРѕРЅР°', language: 'ru' },

        { value: 300, type: 'word', prompt: 'РўСЂР°РЅСЃРјСѓСЂР°Р»СЊРЅРѕРµ СЃРµРіРјРµРЅС‚Р°СЂРЅРѕРµ РіСЂР°РЅСѓР»РµРјР°С‚РѕР·РЅРѕРµ РІРѕСЃРїР°Р»РµРЅРёРµ Р–РљРў, В«РїСЂРѕРїСѓС‰РµРЅРЅС‹РµВ» СѓС‡Р°СЃС‚РєРё, СЃРІРёС‰Рё. РќР°Р·РѕРІРёС‚Рµ Р±РѕР»РµР·РЅСЊ.', answersAccept: ['Р±РѕР»РµР·РЅСЊ РљСЂРѕРЅР°'], canonicalAnswer: 'Р±РѕР»РµР·РЅСЊ РљСЂРѕРЅР°', language: 'ru' },

        { value: 400, type: 'word', prompt: 'Р‘РѕР»СЊ Рё СЃРѕРїСЂРѕС‚РёРІР»РµРЅРёРµ РїСЂРё СЂР°Р·РіРёР±Р°РЅРёРё РіРѕР»РµРЅРё РїСЂРё СЃРѕРіРЅСѓС‚РѕРј Р±РµРґСЂРµ. РќР°Р·РѕРІРёС‚Рµ СЃРёРјРїС‚РѕРј.', answersAccept: ['СЃРёРјРїС‚РѕРј РљРµСЂРЅРёРіР°'], canonicalAnswer: 'СЃРёРјРїС‚РѕРј РљРµСЂРЅРёРіР°', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Р РµР·РєР°СЏ Р±РѕР»РµР·РЅРµРЅРЅРѕСЃС‚СЊ РїСЂРё Р±С‹СЃС‚СЂРѕРј РѕС‚РЅСЏС‚РёРё СЂСѓРєРё РѕС‚ Р±СЂСЋС€РЅРѕР№ СЃС‚РµРЅРєРё. РќР°Р·РѕРІРёС‚Рµ СЃРёРјРїС‚РѕРј.', answersAccept: ['СЃРёРјРїС‚РѕРј Р‘Р»СЋРјР±РµСЂРіР°'], canonicalAnswer: 'СЃРёРјРїС‚РѕРј Р‘Р»СЋРјР±РµСЂРіР°', language: 'ru' },
      ],
    },
  ];

  // Extra categories from user request (added as regular questions; per-participant items included as normal)
  const extraCategories = [
    {
      title: 'Общие вопросы',
      tags: ['general','ru'],
      questions: [
        { value: 100, type: 'word', prompt: 'Кого считают отцом медицины?', answersAccept: ['Гиппократ','Hippocrates','Гиппократа'], canonicalAnswer: 'Гиппократ', language: 'ru' },
        { value: 100, type: 'text', prompt: 'Какова главная врачебная заповедь, сформулированная Гиппократом?', answersAccept: ['Не навреди','Не навреди!','Do no harm'], canonicalAnswer: 'Не навреди', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Кому принадлежит фраза «В мире не существует ядов и лекарств – все решает доза»?', answersAccept: ['Парацельс','Paracelsus','Парацельсу'], canonicalAnswer: 'Парацельс', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Какое заболевание бывает сахарным и несахарным?', answersAccept: ['Диабет'], canonicalAnswer: 'Диабет', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Какая врачебная специальность была у доктора Айболита?', answersAccept: ['Ветеринар','Ветеринарный врач'], canonicalAnswer: 'Ветеринар', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Какое растение считалось целебным до середины XIX века, но сегодня считается вредным?', answersAccept: ['Табак'], canonicalAnswer: 'Табак', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Название какого врача состоит из названий двух человеческих органов?', answersAccept: ['Отоларинголог','Оториноларинголог'], canonicalAnswer: 'Отоларинголог', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Какую болезнь, уносившую в Средние века тысячи жизней, называли «черная смерть»?', answersAccept: ['Чума'], canonicalAnswer: 'Чума', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Как называется препарат из ослабленных/убитых возбудителей для предохранительных прививок?', answersAccept: ['Вакцина'], canonicalAnswer: 'Вакцина', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Какое слово с латыни буквально переводится как «терпящий»?', answersAccept: ['Пациент'], canonicalAnswer: 'Пациент', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Лечебное учреждение для стационарных больных от греч. «постель»', answersAccept: ['Клиника'], canonicalAnswer: 'Клиника', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Наука о лечении болезней без хирургического вмешательства', answersAccept: ['Терапия'], canonicalAnswer: 'Терапия', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Какой врач не спрашивает: «Что у вас болит?»', answersAccept: ['Ветеринар'], canonicalAnswer: 'Ветеринар', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Мышечная перегородка между грудной и брюшной полостями', answersAccept: ['Диафрагма'], canonicalAnswer: 'Диафрагма', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Чего в организме младенца больше, чем у взрослого?', answersAccept: ['Костей','костей'], canonicalAnswer: 'Костей', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Фамилия изобретателя зубной пасты', answersAccept: ['Колгейт','Colgate'], canonicalAnswer: 'Колгейт', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Кто изобрёл первый антибиотик — пенициллин?', answersAccept: ['Александр Флеминг','Флеминг'], canonicalAnswer: 'Александр Флеминг', language: 'ru' },
        // Супер-игра (как обычные вопросы)
        { value: 400, type: 'text', prompt: 'Какие два учёных создали вакцину БЦЖ против туберкулёза?', answersAccept: ['Кальметт и Герен','Кальмет и Герен','BCG'], canonicalAnswer: 'Кальметт и Герен', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Кто впервые создал вакцину против бубонной чумы?', answersAccept: ['Владимир Хавкин','Хавкин','Haffkine'], canonicalAnswer: 'Владимир Хавкин', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Кто создал первую вакцину от натуральной оспы?', answersAccept: ['Эдвард Дженнер','Дженнер','Jenner'], canonicalAnswer: 'Эдвард Дженнер', language: 'ru' },
      ],
    },
    {
      title: 'Анатомия',
      tags: ['anat','ru'],
      questions: [
        { value: 100, type: 'word', prompt: 'Трубчатая кость состоит из эпифиза и ...', answersAccept: ['диафиза','диафиз'], canonicalAnswer: 'диафиза', language: 'ru' },
        { value: 100, type: 'text', prompt: 'Позвоночный столб состоит из ... позвонков', answersAccept: ['32-34','32','33','34'], canonicalAnswer: '32-34', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Неокостеневший участок свода черепа у новорождённых', answersAccept: ['родничок'], canonicalAnswer: 'родничок', language: 'ru' },
        { value: 200, type: 'text', prompt: 'Запястье состоит из ... костей', answersAccept: ['8','восьми'], canonicalAnswer: '8', language: 'ru' },
        { value: 300, type: 'text', prompt: 'Плевра состоит из двух листков: ... и ...', answersAccept: ['висцеральный и париетальный','париетальный и висцеральный'], canonicalAnswer: 'висцеральный и париетальный', language: 'ru' },
        { value: 300, type: 'text', prompt: 'Предплюсна стопы человека состоит из ... костей', answersAccept: ['7','семи'], canonicalAnswer: '7', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Головной мозг состоит из белого и ... вещества', answersAccept: ['серого'], canonicalAnswer: 'серого', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Комплекс подкорковых образований: хвостатое ядро, чечевицеобразное ядро, ограда и ...', answersAccept: ['миндалевидное тело','амигдала'], canonicalAnswer: 'миндалевидное тело', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Система мозговых артерий у основания мозга, названная в честь Томаса Уиллиса', answersAccept: ['Виллизиев круг'], canonicalAnswer: 'Виллизиев круг', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Патологическая венозная сеть на брюшной стенке при портальной гипертензии', answersAccept: ['Голова медузы'], canonicalAnswer: 'Голова медузы', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Лимфоэпителиальное кольцо из нёбных, трубных, глоточной и язычной миндалин образует кольцо ...', answersAccept: ['Пирогова-Вальдейера'], canonicalAnswer: 'Пирогова-Вальдейера', language: 'ru' },
      ],
    },
    {
      title: 'Терапия',
      tags: ['therapy','ru'],
      questions: [
        { value: 100, type: 'text', prompt: 'Вакцинацию от гриппа проводят ...', answersAccept: ['каждый год','ежегодно','1 раз в год'], canonicalAnswer: 'каждый год', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Прибор для измерения артериального давления', answersAccept: ['тонометр'], canonicalAnswer: 'тонометр', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Состояние снижения гемоглобина и эритроцитов', answersAccept: ['анемия'], canonicalAnswer: 'анемия', language: 'ru' },
        { value: 200, type: 'text', prompt: 'Кашель 3 месяца не менее 2 лет подряд указывает на ...', answersAccept: ['хронический бронхит','бронхит'], canonicalAnswer: 'хронический бронхит', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Прибор для выслушивания звуков организма', answersAccept: ['фонендоскоп'], canonicalAnswer: 'фонендоскоп', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Сгусток крови в просвете сосуда', answersAccept: ['тромб'], canonicalAnswer: 'тромб', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Соотношение компрессий и вдохов при СЛР у взрослых', answersAccept: ['30:2','30 к 2','30-2'], canonicalAnswer: '30:2', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Глубокое нарушение сознания без реакции на стимулы', answersAccept: ['кома'], canonicalAnswer: 'кома', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Процесс разрушения эритроцитов', answersAccept: ['гемолиз'], canonicalAnswer: 'гемолиз', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Универсальные реципиенты имеют ... группу крови', answersAccept: ['четвертую','4','AB','AB(IV)'], canonicalAnswer: 'четвертую', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Универсальные доноры имеют ... группу крови', answersAccept: ['первую','1','O','0'], canonicalAnswer: 'первую', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Острое инфекционное заболевание лёгочной ткани', answersAccept: ['пневмония'], canonicalAnswer: 'пневмония', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Белок на поверхности эритроцитов, обозначают буквой D', answersAccept: ['резус-фактор','Rh фактор'], canonicalAnswer: 'резус-фактор', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Белок, содержащий железо, в составе эритроцитов', answersAccept: ['гемоглобин'], canonicalAnswer: 'гемоглобин', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Клетка, образуется в костном мозге, живёт ~120 дней, переносит газы', answersAccept: ['эритроцит'], canonicalAnswer: 'эритроцит', language: 'ru' },
      ],
    },
    {
      title: 'Эндокринология',
      tags: ['endocrinology','ru'],
      questions: [
        { value: 100, type: 'word', prompt: 'Основной мужской половой гормон', answersAccept: ['тестостерон'], canonicalAnswer: 'тестостерон', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Основной женский половой гормон', answersAccept: ['эстрадиол'], canonicalAnswer: 'эстрадиол', language: 'ru' },
        { value: 100, type: 'text', prompt: 'Хроническое заболевание, связанное с нарушением обмена глюкозы', answersAccept: ['сахарный диабет','диабет'], canonicalAnswer: 'сахарный диабет', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Препарат первой линии при СД 2 типа', answersAccept: ['метформин'], canonicalAnswer: 'метформин', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Хроническое избыточное накопление жира', answersAccept: ['ожирение'], canonicalAnswer: 'ожирение', language: 'ru' },
        { value: 200, type: 'text', prompt: 'Кратность определения HbA1c при СД за год', answersAccept: ['каждые 3 месяца','четыре раза в год','раз в квартал'], canonicalAnswer: 'каждые 3 месяца', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Синдром полиурии и полидипсии из-за нарушения реабсорбции воды', answersAccept: ['несахарный диабет'], canonicalAnswer: 'несахарный диабет', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Гиперметаболизм из-за избытка тиреоидных гормонов', answersAccept: ['тиреотоксикоз','гипертиреоз'], canonicalAnswer: 'тиреотоксикоз', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Недостаточная выработка гормонов щитовидной железой', answersAccept: ['гипотиреоз'], canonicalAnswer: 'гипотиреоз', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Метод радионуклидной диагностики', answersAccept: ['сцинтиграфия'], canonicalAnswer: 'сцинтиграфия', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Снижение костной массы и ломкость костей', answersAccept: ['остеопороз'], canonicalAnswer: 'остеопороз', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Заболевание из-за гиперпродукции АКТГ опухолью гипофиза', answersAccept: ['болезнь Иценко-Кушинга','Иценко-Кушинга'], canonicalAnswer: 'болезнь Иценко-Кушинга', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Пролактин вырабатывается преимущественно передней долей ...', answersAccept: ['гипофиза'], canonicalAnswer: 'гипофиза', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Эстрогены у женщин во время беременности вырабатываются ...', answersAccept: ['плацентой'], canonicalAnswer: 'плацентой', language: 'ru' },
        { value: 400, type: 'word', prompt: 'У мужчин часть тестостерона вырабатывается в ...', answersAccept: ['надпочечниках'], canonicalAnswer: 'надпочечниках', language: 'ru' },
      ],
    },
    {
      title: 'Хирургия',
      tags: ['surgery','ru'],
      questions: [
        { value: 100, type: 'word', prompt: 'Очаговое гнойное воспаление с полостью, заполненной гноем', answersAccept: ['абсцесс'], canonicalAnswer: 'абсцесс', language: 'ru' },
        { value: 100, type: 'text', prompt: 'Острое разлитое гнойное воспаление клетчатки', answersAccept: ['флегмона'], canonicalAnswer: 'флегмона', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Компактный пористый материал для остановки кровотечения', answersAccept: ['гемостатическая губка'], canonicalAnswer: 'гемостатическая губка', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Соединение между полыми органами/сосудами', answersAccept: ['анастомоз'], canonicalAnswer: 'анастомоз', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Удаление части органа', answersAccept: ['резекция'], canonicalAnswer: 'резекция', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Замещение отсутствующих тканей/органов', answersAccept: ['трансплантация'], canonicalAnswer: 'трансплантация', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Взятие образца тканей для микроскопии', answersAccept: ['биопсия'], canonicalAnswer: 'биопсия', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Предупреждение попадания микробов при манипуляциях', answersAccept: ['асептика'], canonicalAnswer: 'асептика', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Уничтожение микроорганизмов в ране/организме', answersAccept: ['антисептика'], canonicalAnswer: 'антисептика', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Принцип предотвращения рецидива и метастазирования', answersAccept: ['абластика'], canonicalAnswer: 'абластика', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Триада Мондора при остром панкреатите: вздутие живота, боль и ...', answersAccept: ['рвоту','рвота'], canonicalAnswer: 'рвоту', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Перитонеальные симптомы: Щёткина-Блюмберга, Воскресенского и ...', answersAccept: ['Менделя'], canonicalAnswer: 'Менделя', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Операция изменения формы/размера носа', answersAccept: ['ринопластика'], canonicalAnswer: 'ринопластика', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Удаление локальных жировых отложений', answersAccept: ['липосакция'], canonicalAnswer: 'липосакция', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Коррекция ушных раковин', answersAccept: ['отопластика'], canonicalAnswer: 'отопластика', language: 'ru' },
      ],
    },
    {
      title: 'История медицины',
      tags: ['history','ru'],
      questions: [
        { value: 100, type: 'word', prompt: 'Анатомические знания в Древнем Египте получали при ...', answersAccept: ['бальзамировании','бальзамирование'], canonicalAnswer: 'бальзамирование', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Лечебная процедура извлечения крови', answersAccept: ['кровопускание'], canonicalAnswer: 'кровопускание', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Знаменитое лечебное мероприятие на Руси', answersAccept: ['баня'], canonicalAnswer: 'баня', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Центром жизни в Индии считали ...', answersAccept: ['пупок'], canonicalAnswer: 'пупок', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Парацельс уделял особое внимание изучению ...', answersAccept: ['химии','химия'], canonicalAnswer: 'химия', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Изучение анатомии на замороженных трупах впервые применил ...', answersAccept: ['Пирогов'], canonicalAnswer: 'Пирогов', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Закон наследственности открыл ...', answersAccept: ['Мендель'], canonicalAnswer: 'Мендель', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Древнейший критерий человека', answersAccept: ['прямохождение'], canonicalAnswer: 'прямохождение', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Заразное заболевание в Европе во времена крестовых походов', answersAccept: ['проказа'], canonicalAnswer: 'проказа', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Основоположник военно-полевой хирургии в России', answersAccept: ['Пирогов'], canonicalAnswer: 'Пирогов', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Открыл фагоцитоз и основы клеточной теории иммунитета (Нобель 1908)', answersAccept: ['Мечников'], canonicalAnswer: 'Мечников', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Создатель учения о высшей нервной деятельности', answersAccept: ['Павлов'], canonicalAnswer: 'Павлов', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Операция для изгнания злого духа в первобытности', answersAccept: ['трепанация черепа','трепанация'], canonicalAnswer: 'трепанация черепа', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Первыми медиками эпохи разложения первобытного общества были ...', answersAccept: ['шаманы'], canonicalAnswer: 'шаманы', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Мудров одним из первых начал применять перкуссию и ...', answersAccept: ['аускультацию','аускультация'], canonicalAnswer: 'аускультацию', language: 'ru' },
      ],
    },
    {
      title: 'Урология',
      tags: ['urology','ru'],
      questions: [
        { value: 100, type: 'word', prompt: 'Воспалительное заболевание предстательной железы', answersAccept: ['простатит'], canonicalAnswer: 'простатит', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Воспаление мочевого пузыря', answersAccept: ['цистит'], canonicalAnswer: 'цистит', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Парный орган в поясничной области по обе стороны от позвоночника', answersAccept: ['почка','почки'], canonicalAnswer: 'почка', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Инфекционно-воспалительное заболевание почки с поражением ЧЛС', answersAccept: ['пиелонефрит'], canonicalAnswer: 'пиелонефрит', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Отложение амилоида в ткани почек', answersAccept: ['амилоидоз'], canonicalAnswer: 'амилоидоз', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Отсутствие мочи в мочевом пузыре', answersAccept: ['анурия'], canonicalAnswer: 'анурия', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Полная задержка мочеиспускания', answersAccept: ['ишурия'], canonicalAnswer: 'ишурия', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Тактика при перекруте яичка', answersAccept: ['оперативная','операция'], canonicalAnswer: 'оперативная', language: 'ru' },
        { value: 300, type: 'text', prompt: 'Основное направление диеты при ХПН', answersAccept: ['малобелковая диета'], canonicalAnswer: 'малобелковая диета', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Куда чаще всего метастазирует рак простаты?', answersAccept: ['в кости','кости'], canonicalAnswer: 'кости', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Наличие в эякуляте только клеток сперматогенеза', answersAccept: ['азооспермия'], canonicalAnswer: 'азооспермия', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Отсутствие в эякуляте сперматозоидов и клеток сперматогенеза', answersAccept: ['аспермия','аспермия'], canonicalAnswer: 'аспермия', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Воспаление крайней плоти и головки полового члена', answersAccept: ['баланопостит'], canonicalAnswer: 'баланопостит', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Классическая триада: гематурия, пальпируемое образование, боль в пояснице характерна для ...', answersAccept: ['рака почки'], canonicalAnswer: 'рака почки', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Аномалия — полное отсутствие обоих яичек', answersAccept: ['анорхизм'], canonicalAnswer: 'анорхизм', language: 'ru' },
      ],
    },
    {
      title: 'Неврология',
      tags: ['neurology','ru'],
      questions: [
        { value: 100, type: 'word', prompt: 'Существует два вида инсульта: ишемический и ...', answersAccept: ['геморрагический'], canonicalAnswer: 'геморрагический', language: 'ru' },
        { value: 100, type: 'text', prompt: 'Отмирание участка ткани мозга из-за нарушения кровоснабжения', answersAccept: ['ишемический инсульт','инфаркт мозга'], canonicalAnswer: 'ишемический инсульт', language: 'ru' },
        { value: 100, type: 'text', prompt: 'Острое кровоизлияние в вещество мозга', answersAccept: ['геморрагический инсульт'], canonicalAnswer: 'геморрагический инсульт', language: 'ru' },
        { value: 200, type: 'text', prompt: 'Основной симптом при обострении поясничного остеохондроза', answersAccept: ['боль в пояснице'], canonicalAnswer: 'боль в пояснице', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Ощущение “треска” в шее при поворотах головы характерно для ...', answersAccept: ['остеохондроза','остеохондроз'], canonicalAnswer: 'остеохондроз', language: 'ru' },
        { value: 200, type: 'text', prompt: 'Как транспортируют больных с ОНМК?', answersAccept: ['лежа на спине','лежа'], canonicalAnswer: 'лежа на спине', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Антидот при отравлении метиловым спиртом', answersAccept: ['этиловый спирт','этанол'], canonicalAnswer: 'этиловый спирт', language: 'ru' },
        { value: 300, type: 'text', prompt: 'Основное проявление неврита лицевого нерва', answersAccept: ['перекос лица','асимметрия лица'], canonicalAnswer: 'перекос лица', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Основная структурно-функциональная единица нервной системы', answersAccept: ['нейрон'], canonicalAnswer: 'нейрон', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Дисфагия возникает при поражении пар черепных нервов ...', answersAccept: ['9-10','IX-X','9 и 10'], canonicalAnswer: '9-10', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Птоз возникает при поражении черепного нерва ...', answersAccept: ['третьего','III','3'], canonicalAnswer: 'третьего', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Статика зависит от деятельности отдела мозга ...', answersAccept: ['мозжечок','мозжечка'], canonicalAnswer: 'мозжечок', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Самый крупный нерв человеческого тела', answersAccept: ['седалищный','седалищный нерв'], canonicalAnswer: 'седалищный', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Для лечения диабетической полинейропатии показана ...', answersAccept: ['тиоктовая кислота','альфа-липоевая кислота'], canonicalAnswer: 'тиоктовая кислота', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Нарушение узнавания при сохранении чувствительности и сознания', answersAccept: ['агнозия'], canonicalAnswer: 'агнозия', language: 'ru' },
      ],
    },
    {
      title: 'Кардиология',
      tags: ['cardio','ru'],
      questions: [
        { value: 100, type: 'text', prompt: 'Острое нарушение кровоснабжения миокарда с некрозом', answersAccept: ['инфаркт миокарда','инфаркт'], canonicalAnswer: 'инфаркт миокарда', language: 'ru' },
        { value: 100, type: 'text', prompt: 'Хроническая болезнь артерий с отложением холестерина', answersAccept: ['атеросклероз'], canonicalAnswer: 'атеросклероз', language: 'ru' },
        { value: 100, type: 'word', prompt: 'Очень высокий риск по SCORE более ... %', answersAccept: ['10','10%'], canonicalAnswer: '10', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Отмена статинов при трансаминазах выше нормы в ... раза', answersAccept: ['3','три'], canonicalAnswer: '3', language: 'ru' },
        { value: 200, type: 'word', prompt: 'Целевой АД < ... мм рт.ст. при лечении АГ', answersAccept: ['140/90','140 90','140-90'], canonicalAnswer: '140/90', language: 'ru' },
        { value: 200, type: 'text', prompt: 'Исследование для оценки реакции ССС на изменение положения тела', answersAccept: ['ортостатическая проба'], canonicalAnswer: 'ортостатическая проба', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Препараты выбора при АГ у пациентов с подагрой', answersAccept: ['сартаны','БРА'], canonicalAnswer: 'сартаны', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Первая доза бисопролола при СН (мг)', answersAccept: ['1.25','1,25'], canonicalAnswer: '1.25', language: 'ru' },
        { value: 300, type: 'word', prompt: 'Рентгеноконтрастное исследование сосудов сердца', answersAccept: ['коронарография'], canonicalAnswer: 'коронарография', language: 'ru' },
        { value: 400, type: 'word', prompt: 'Воспаление стенок крупных артерий (чаще аорты и ветвей)', answersAccept: ['болезнь Такаясу','Такаясу'], canonicalAnswer: 'болезнь Такаясу', language: 'ru' },
        { value: 400, type: 'word', prompt: 'При дислипидемии 4 типа резко повышены', answersAccept: ['ЛПОНП','VLDL'], canonicalAnswer: 'ЛПОНП', language: 'ru' },
        { value: 400, type: 'text', prompt: 'Макрофаги, переполненные жировыми включениями', answersAccept: ['пенистые клетки'], canonicalAnswer: 'пенистые клетки', language: 'ru' },
        { value: 400, type: 'word', prompt: 'ФК для стенокардии напряжения: приступы при >500 м — это класс ...', answersAccept: ['2','второй'], canonicalAnswer: '2', language: 'ru' },
        { value: 400, type: 'word', prompt: 'ФК: приступы при 100–500 м или подъёме на 1 этаж — класс ...', answersAccept: ['3','третий'], canonicalAnswer: '3', language: 'ru' },
        { value: 400, type: 'word', prompt: 'ФК: приступы при минимальной нагрузке, <100 м, в покое — класс ...', answersAccept: ['4','четвертый','четвёртый'], canonicalAnswer: '4', language: 'ru' },
      ],
    },
  ];
  categories.push(...extraCategories);
  for (const cat of categories) {
    const existing = await prisma.category.findUnique({ where: { title: cat.title } });
    let categoryId: string;
    if (!existing) {
      const created = await prisma.category.create({ data: { title: cat.title, tags: cat.tags ?? [] } });
      categoryId = created.id;
    } else {
      categoryId = existing.id;
      // Replace questions for this category on reseed to avoid duplicates (handle FKs)
      await deleteCategoryQuestionsCascade(categoryId);
      await prisma.category.update({ where: { id: categoryId }, data: { title: cat.title, tags: cat.tags ?? [] } });
    }

    for (const q of cat.questions) {
      const answersAccept = q.answersAccept ?? [];
      const canonical = q.canonicalAnswer || answersAccept[0] || '';
      if (!canonical) continue; // skip incomplete entries
      await prisma.question.create({
        data: {
          type: toQuestionType(q.type),
          prompt: q.prompt,
          rawAnswer: canonical,
          canonicalAnswer: canonical,
          value: q.value,
          answersAccept,
          answersReject: [],
          requireFull: q.requireFull ?? false,
          language: q.language ?? 'ru',
          hint: null,
          categoryId,
        },
      });
    }
  }
}

// --- SuperQuestion seeding (test content) ---
async function seedSuperQuestionsMedical() {
  // Pick medical-related categories by tags
  const medCats = await prisma.category.findMany({ where: { tags: { hasSome: ['pharm', 'anat', 'med'] } } });
  if (medCats.length === 0) {
    console.log('No medical categories found by tags; skipping SuperQuestion seeding');
    return;
  }

  // Helper to get a question by value in category
  async function getBaseQuestion(catId: string, value: number) {
    return prisma.question.findFirst({ where: { categoryId: catId, value }, orderBy: { createdAt: 'asc' } });
  }

  // Collect up to 4 base questions: prefer values 200 and 400 across categories
  const targets: { categoryId: string; value: number; qId: string; correct: string }[] = [];
  for (const c of medCats) {
    for (const val of [200, 400]) {
      if (targets.length >= 4) break;
      const base = await getBaseQuestion(c.id, val);
      if (!base) continue;
      const correct = (base as any).canonicalAnswer || (base as any).rawAnswer || '';
      if (!correct) continue;
      // Avoid duplicates by questionId
      if (targets.some((t) => t.qId === base.id)) continue;
      targets.push({ categoryId: c.id, value: val, qId: base.id, correct: String(correct) });
    }
    if (targets.length >= 4) break;
  }
  if (targets.length === 0) {
    console.log('No base questions found for SuperQuestion seeding');
    return;
  }

  // Preload distractor pool (answers from other questions)
  const distractorPoolRaw = await prisma.question.findMany({
    take: 100,
    orderBy: { createdAt: 'asc' },
    select: { canonicalAnswer: true, rawAnswer: true },
  });
  const normalize = (s: string) => s.toLowerCase().normalize('NFKD').replace(/[^\p{L}\p{N}]+/gu, ' ').trim();
  const distractorPool = Array.from(
    new Set(
      distractorPoolRaw
        .map((q) => String((q as any).canonicalAnswer || (q as any).rawAnswer || ''))
        .filter((s) => !!s && s.trim().length > 0),
    ),
  );

  const createdIds: string[] = [];
  for (const t of targets) {
    // Skip if a SuperQuestion already exists for this base question
    const exists = await prisma.superQuestion.findFirst({ where: { questionId: t.qId } });
    if (exists) continue;

    // Build 3 distractors different from correct
    const correctNorm = normalize(t.correct);
    const distractors: string[] = [];
    const pool = distractorPool.filter((a) => normalize(a) !== correctNorm);
    while (distractors.length < 3 && pool.length > 0) {
      const idx = Math.floor(Math.random() * pool.length);
      const [pick] = pool.splice(idx, 1);
      if (distractors.every((d) => normalize(d) !== normalize(pick))) distractors.push(pick);
    }
    while (distractors.length < 3) distractors.push('вЂ”');
    const opts = [t.correct, ...distractors.slice(0, 3)];
    // Shuffle options
    for (let i = opts.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [opts[i], opts[j]] = [opts[j], opts[i]];
    }
    const correctIndex = opts.findIndex((o) => normalize(o) === correctNorm);

    const sq = await prisma.superQuestion.create({
      data: {
        questionId: t.qId,
        enabled: true,
        options: opts as unknown as any, // Prisma Json type
        correctIndex: correctIndex >= 0 ? correctIndex : 0,
        locale: 'ru',
        tags: ['medical'],
      },
    });
    createdIds.push(sq.id);
  }
  console.log(`Seeded ${createdIds.length} SuperQuestion(s) [medical]`);
}

seed()
  .then(async () => {
    console.log('Seeded categories and questions');
    // Include user-provided medical categories
    await seedUserProvided();
    await seedSuperQuestionsMedical();
    await prisma.$disconnect();
  })
  .catch(async (e) => {
    console.error(e);
    await prisma.$disconnect();
    process.exit(1);
  });
